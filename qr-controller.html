<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>DG-LAB QR Controller</title>
  <script type="module">
    import { connectionId, initWebSocket } from "./wsConnection.js";

    const qrDiv = document.getElementById("qrcode");

    function generateQR() {
      const url = "dg://" + connectionId;
      new QRCode(qrDiv, {
        text: url,
        width: 256,
        height: 256,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H,
      });
    }

    initWebSocket(() => {
      console.log("ðŸŽ¯ App verbunden.");
    });

    generateQR();

    document.getElementById("resetBtn").addEventListener("click", () => {
      location.reload();
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body style="text-align:center; font-family:sans-serif;">
  <h1>ðŸ”— DG-LAB QR-Code</h1>
  <div id="qrcode" style="margin: 20px auto;"></div>
  <button id="resetBtn">ðŸ”„ Neue Verbindung</button>
</body>
</html>
